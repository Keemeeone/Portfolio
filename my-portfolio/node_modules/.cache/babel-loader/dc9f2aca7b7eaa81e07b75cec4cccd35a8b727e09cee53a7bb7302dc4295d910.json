{"ast":null,"code":"// Scroll.jsx\n/*\nSPDX-FileCopyrightText: © 2024 Heewon Kim <khw0285@gmail.com>\nSPDX-License-Identifier: MIT\n*/import React,{useState,useRef}from\"react\";import Header from\"../Header/Header\";import Motion from\"./Motion\";/**\n * Scroll component handling vertical scrolling and displaying a Header.\n * @param {Object} props - Props for the Scroll component.\n * @param {React.Component[]} props.components - Array of React components to be displayed.\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Scroll=_ref=>{var _scrollRef$current,_scrollRef$current2;let{components}=_ref;const[activeIndex,setActiveIndex]=useState(0);const[scrollPosition,setScrollPosition]=useState(0);const scrollRef=useRef();// useEffect(() => {\n//     const handleResize = () => {\n//         if (scrollRef.current) {\n//             const componentHeight = scrollRef.current.clientHeight;\n//             const newIndex = Math.floor(scrollRef.current.scrollTop / componentHeight);\n//             setActiveIndex(newIndex);\n//         }\n//     };\n//     if (scrollRef.current) {\n//         window.addEventListener(\"resize\", handleResize);\n//         return () => {\n//             window.removeEventListener(\"resize\", handleResize);\n//         };\n//     }\n// }, []);\nconst handleScroll=()=>{if(scrollRef.current){const scrollTop=scrollRef.current.scrollTop;const componentHeight=scrollRef.current.clientHeight;const newIndex=scrollTop/componentHeight;setActiveIndex(newIndex);// 스크롤 위치 업데이트\nsetScrollPosition(scrollTop);}};const calculateOpacity=index=>{if(scrollRef.current){const componentHeight=scrollRef.current.clientHeight;const distanceToComponent=Math.abs(scrollPosition-index*componentHeight);const maxDistance=componentHeight*0.4;// Calculate opacity based on the distance to the component\nconst opacity=1-Math.min(distanceToComponent/maxDistance,1);return opacity;}// Default opacity if scrollRef.current is undefined\nreturn 1;};const scrollToComponent=index=>{if(scrollRef.current){const componentHeight=scrollRef.current.clientHeight;scrollRef.current.scrollTo({top:index*componentHeight,behavior:\"smooth\"});}};const updateSlideState=index=>{scrollToComponent(index);};return/*#__PURE__*/_jsxs(\"div\",{ref:scrollRef,onScroll:handleScroll,style:{height:\"100vh\",overflowY:\"scroll\",scrollBehavior:\"smooth\"},children:[/*#__PURE__*/_jsx(Header,{orientation:'vertical',length:components.length,clickHandler:updateSlideState}),scrollPosition!==0&&/*#__PURE__*/_jsx(Motion,{scrollPosition:scrollPosition,scrollHeight:(_scrollRef$current=scrollRef.current)===null||_scrollRef$current===void 0?void 0:_scrollRef$current.scrollHeight,clientHeight:(_scrollRef$current2=scrollRef.current)===null||_scrollRef$current2===void 0?void 0:_scrollRef$current2.clientHeight}),components.map((component,index)=>/*#__PURE__*/_jsx(\"div\",{style:{height:\"100vh\",opacity:calculateOpacity(index),transition:\"opacity 0.2s ease-in-out\"},children:/*#__PURE__*/React.cloneElement(component,{isActive:index===activeIndex,scrollPosition,activeIndex})},index))]});};export default Scroll;","map":{"version":3,"names":["React","useState","useRef","Header","Motion","jsx","_jsx","jsxs","_jsxs","Scroll","_ref","_scrollRef$current","_scrollRef$current2","components","activeIndex","setActiveIndex","scrollPosition","setScrollPosition","scrollRef","handleScroll","current","scrollTop","componentHeight","clientHeight","newIndex","calculateOpacity","index","distanceToComponent","Math","abs","maxDistance","opacity","min","scrollToComponent","scrollTo","top","behavior","updateSlideState","ref","onScroll","style","height","overflowY","scrollBehavior","children","orientation","length","clickHandler","scrollHeight","map","component","transition","cloneElement","isActive"],"sources":["/Users/heewonkim/Desktop/Portfolio/my-portfolio/src/components/Wrapper/Scroll.jsx"],"sourcesContent":["// Scroll.jsx\n/*\nSPDX-FileCopyrightText: © 2024 Heewon Kim <khw0285@gmail.com>\nSPDX-License-Identifier: MIT\n*/\n\nimport React, { useState, useRef } from \"react\";\n\nimport Header from \"../Header/Header\";\nimport Motion from \"./Motion\";\n\n/**\n * Scroll component handling vertical scrolling and displaying a Header.\n * @param {Object} props - Props for the Scroll component.\n * @param {React.Component[]} props.components - Array of React components to be displayed.\n */\nconst Scroll = ({ components }) => {\n    const [activeIndex, setActiveIndex] = useState(0);\n    const [scrollPosition, setScrollPosition] = useState(0);\n\n    const scrollRef = useRef();\n\n    // useEffect(() => {\n    //     const handleResize = () => {\n    //         if (scrollRef.current) {\n    //             const componentHeight = scrollRef.current.clientHeight;\n    //             const newIndex = Math.floor(scrollRef.current.scrollTop / componentHeight);\n    //             setActiveIndex(newIndex);\n    //         }\n    //     };\n\n    //     if (scrollRef.current) {\n    //         window.addEventListener(\"resize\", handleResize);\n\n    //         return () => {\n    //             window.removeEventListener(\"resize\", handleResize);\n    //         };\n    //     }\n    // }, []);\n\n    const handleScroll = () => {\n        if (scrollRef.current) {\n            const scrollTop = scrollRef.current.scrollTop;\n            const componentHeight = scrollRef.current.clientHeight;\n\n            const newIndex = scrollTop / componentHeight;\n            setActiveIndex(newIndex);\n\n            // 스크롤 위치 업데이트\n            setScrollPosition(scrollTop);\n        }\n    };\n\n    const calculateOpacity = (index) => {\n        if (scrollRef.current) {\n            const componentHeight = scrollRef.current.clientHeight;\n            const distanceToComponent = Math.abs(scrollPosition - index * componentHeight);\n            const maxDistance = componentHeight * 0.4;\n\n            // Calculate opacity based on the distance to the component\n            const opacity = 1 - Math.min(distanceToComponent / maxDistance, 1);\n\n            return opacity;\n        }\n\n        // Default opacity if scrollRef.current is undefined\n        return 1;\n    };\n\n    const scrollToComponent = (index) => {\n        if (scrollRef.current) {\n            const componentHeight = scrollRef.current.clientHeight;\n            scrollRef.current.scrollTo({\n                top: index * componentHeight,\n                behavior: \"smooth\",\n            });\n        }\n    };\n\n    const updateSlideState = (index) => {\n        scrollToComponent(index);\n    };\n\n    return (\n        <div\n            ref={scrollRef}\n            onScroll={handleScroll}\n            style={{\n                height: \"100vh\",\n                overflowY: \"scroll\",\n                scrollBehavior: \"smooth\",\n            }}\n        >\n            <Header\n                orientation={'vertical'}\n                length={components.length}\n                clickHandler={updateSlideState}\n            />\n            {scrollPosition !== 0 && (\n                <Motion\n                    scrollPosition={scrollPosition}\n                    scrollHeight={scrollRef.current?.scrollHeight}\n                    clientHeight={scrollRef.current?.clientHeight}\n                />\n            )}\n            \n            {components.map((component, index) => (\n                <div\n                    key={index}\n                    style={{\n                        height: \"100vh\",\n                        opacity: calculateOpacity(index), \n                        transition: \"opacity 0.2s ease-in-out\",\n                    }}\n                >\n                    {React.cloneElement(component, { isActive: index === activeIndex, scrollPosition,activeIndex })}\n                </div>\n            ))}\n        </div>\n    );\n};\n\nexport default Scroll;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}