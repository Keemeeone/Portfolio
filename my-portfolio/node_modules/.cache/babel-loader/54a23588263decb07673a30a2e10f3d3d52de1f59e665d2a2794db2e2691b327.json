{"ast":null,"code":"// Scroll.jsx\n/*\nSPDX-FileCopyrightText: © 2024 Heewon Kim <khw0285@gmail.com>\nSPDX-License-Identifier: MIT\n*/import React,{useState,useEffect,useRef}from\"react\";import Header from\"../Header/Header\";import Motion from\"./Motion\";/**\n * Scroll component handling vertical scrolling and displaying a Header.\n * @param {Object} props - Props for the Scroll component.\n * @param {React.Component[]} props.components - Array of React components to be displayed.\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Scroll=_ref=>{var _scrollRef$current,_scrollRef$current2;let{components}=_ref;const[activeIndex,setActiveIndex]=useState(0);const[scrollPosition,setScrollPosition]=useState(0);const scrollRef=useRef();useEffect(()=>{const handleResize=()=>{if(scrollRef.current){const componentHeight=scrollRef.current.clientHeight;const newIndex=Math.floor(scrollRef.current.scrollTop/componentHeight);setActiveIndex(newIndex);}};if(scrollRef.current){window.addEventListener(\"resize\",handleResize);return()=>{window.removeEventListener(\"resize\",handleResize);};}},[]);const handleScroll=()=>{if(scrollRef.current){const scrollTop=scrollRef.current.scrollTop;const componentHeight=scrollRef.current.clientHeight;const newIndex=Math.floor(scrollTop/componentHeight);setActiveIndex(newIndex);// 스크롤 위치 업데이트\nsetScrollPosition(scrollTop);}};const calculateOpacity=index=>{if(scrollRef.current){const componentHeight=scrollRef.current.clientHeight;const distanceToComponent=Math.abs(scrollPosition-index*componentHeight);const maxDistance=componentHeight*0.4;// Calculate opacity based on the distance to the component\nconst opacity=1-Math.min(distanceToComponent/maxDistance,1);return opacity;}// Default opacity if scrollRef.current is undefined\nreturn 1;};const scrollToComponent=index=>{if(scrollRef.current){const componentHeight=scrollRef.current.clientHeight;scrollRef.current.scrollTo({top:index*componentHeight,behavior:\"smooth\"});}};const updateSlideState=index=>{scrollToComponent(index);};return/*#__PURE__*/_jsxs(\"div\",{ref:scrollRef,onScroll:handleScroll,style:{height:\"100vh\",overflowY:\"scroll\",scrollBehavior:\"smooth\"},children:[/*#__PURE__*/_jsx(Header,{orientation:'vertical',length:components.length,clickHandler:updateSlideState}),scrollPosition!==0&&/*#__PURE__*/_jsx(Motion,{scrollPosition:scrollPosition,scrollHeight:(_scrollRef$current=scrollRef.current)===null||_scrollRef$current===void 0?void 0:_scrollRef$current.scrollHeight,clientHeight:(_scrollRef$current2=scrollRef.current)===null||_scrollRef$current2===void 0?void 0:_scrollRef$current2.clientHeight}),components.map((component,index)=>/*#__PURE__*/_jsx(\"div\",{style:{height:\"100vh\",opacity:calculateOpacity(index),transition:\"opacity 0.2s ease-in-out\"},children:/*#__PURE__*/React.cloneElement(component,{isActive:index===activeIndex,scrollPosition,activeIndex})},index))]});};export default Scroll;","map":{"version":3,"names":["React","useState","useEffect","useRef","Header","Motion","jsx","_jsx","jsxs","_jsxs","Scroll","_ref","_scrollRef$current","_scrollRef$current2","components","activeIndex","setActiveIndex","scrollPosition","setScrollPosition","scrollRef","handleResize","current","componentHeight","clientHeight","newIndex","Math","floor","scrollTop","window","addEventListener","removeEventListener","handleScroll","calculateOpacity","index","distanceToComponent","abs","maxDistance","opacity","min","scrollToComponent","scrollTo","top","behavior","updateSlideState","ref","onScroll","style","height","overflowY","scrollBehavior","children","orientation","length","clickHandler","scrollHeight","map","component","transition","cloneElement","isActive"],"sources":["/Users/heewonkim/Desktop/Portfolio/my-portfolio/src/components/Wrapper/Scroll.jsx"],"sourcesContent":["// Scroll.jsx\n/*\nSPDX-FileCopyrightText: © 2024 Heewon Kim <khw0285@gmail.com>\nSPDX-License-Identifier: MIT\n*/\n\nimport React, { useState, useEffect, useRef } from \"react\";\n\nimport Header from \"../Header/Header\";\nimport Motion from \"./Motion\";\n\n/**\n * Scroll component handling vertical scrolling and displaying a Header.\n * @param {Object} props - Props for the Scroll component.\n * @param {React.Component[]} props.components - Array of React components to be displayed.\n */\nconst Scroll = ({ components }) => {\n    const [activeIndex, setActiveIndex] = useState(0);\n    const [scrollPosition, setScrollPosition] = useState(0);\n\n    const scrollRef = useRef();\n\n    useEffect(() => {\n        const handleResize = () => {\n            if (scrollRef.current) {\n                const componentHeight = scrollRef.current.clientHeight;\n                const newIndex = Math.floor(scrollRef.current.scrollTop / componentHeight);\n                setActiveIndex(newIndex);\n            }\n        };\n\n        if (scrollRef.current) {\n            window.addEventListener(\"resize\", handleResize);\n\n            return () => {\n                window.removeEventListener(\"resize\", handleResize);\n            };\n        }\n    }, []);\n\n    const handleScroll = () => {\n        if (scrollRef.current) {\n            const scrollTop = scrollRef.current.scrollTop;\n            const componentHeight = scrollRef.current.clientHeight;\n\n            const newIndex = Math.floor(scrollTop / componentHeight);\n            setActiveIndex(newIndex);\n\n            // 스크롤 위치 업데이트\n            setScrollPosition(scrollTop);\n        }\n    };\n\n    const calculateOpacity = (index) => {\n        if (scrollRef.current) {\n            const componentHeight = scrollRef.current.clientHeight;\n            const distanceToComponent = Math.abs(scrollPosition - index * componentHeight);\n            const maxDistance = componentHeight * 0.4;\n\n            // Calculate opacity based on the distance to the component\n            const opacity = 1 - Math.min(distanceToComponent / maxDistance, 1);\n\n            return opacity;\n        }\n\n        // Default opacity if scrollRef.current is undefined\n        return 1;\n    };\n\n    const scrollToComponent = (index) => {\n        if (scrollRef.current) {\n            const componentHeight = scrollRef.current.clientHeight;\n            scrollRef.current.scrollTo({\n                top: index * componentHeight,\n                behavior: \"smooth\",\n            });\n        }\n    };\n\n    const updateSlideState = (index) => {\n        scrollToComponent(index);\n    };\n\n    return (\n        <div\n            ref={scrollRef}\n            onScroll={handleScroll}\n            style={{\n                height: \"100vh\",\n                overflowY: \"scroll\",\n                scrollBehavior: \"smooth\",\n            }}\n        >\n            <Header\n                orientation={'vertical'}\n                length={components.length}\n                clickHandler={updateSlideState}\n            />\n            {scrollPosition !== 0 && (\n                <Motion\n                    scrollPosition={scrollPosition}\n                    scrollHeight={scrollRef.current?.scrollHeight}\n                    clientHeight={scrollRef.current?.clientHeight}\n                />\n            )}\n            \n            {components.map((component, index) => (\n                <div\n                    key={index}\n                    style={{\n                        height: \"100vh\",\n                        opacity: calculateOpacity(index), \n                        transition: \"opacity 0.2s ease-in-out\",\n                    }}\n                >\n                    {React.cloneElement(component, { isActive: index === activeIndex, scrollPosition,activeIndex })}\n                </div>\n            ))}\n        </div>\n    );\n};\n\nexport default Scroll;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}