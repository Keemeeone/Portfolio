{"ast":null,"code":"// Scroll.jsx\n/*\nSPDX-FileCopyrightText: © 2024 Heewon Kim <khw0285@gmail.com>\nSPDX-License-Identifier: MIT\n*/import React,{useState,useRef}from\"react\";import Header from\"../Header/Header\";import Motion from\"./Motion\";import ArrowCircleUpIcon from'@mui/icons-material/ArrowCircleUp';/**\n * Scroll component handling vertical scrolling and displaying a Header.\n * @param {Object} props - Props for the Scroll component.\n * @param {React.Component[]} props.components - Array of React components to be displayed.\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Scroll=_ref=>{var _scrollRef$current,_scrollRef$current2;let{components}=_ref;const[activeIndex,setActiveIndex]=useState(0);const[scrollPosition,setScrollPosition]=useState(0);const scrollRef=useRef();// useEffect(() => {\n//     const handleResize = () => {\n//         if (scrollRef.current) {\n//             const componentHeight = scrollRef.current.clientHeight;\n//             const newIndex = Math.floor(scrollRef.current.scrollTop / componentHeight);\n//             setActiveIndex(newIndex);\n//         }\n//     };\n//     if (scrollRef.current) {\n//         window.addEventListener(\"resize\", handleResize);\n//         return () => {\n//             window.removeEventListener(\"resize\", handleResize);\n//         };\n//     }\n// }, []);\nconst handleScroll=()=>{if(scrollRef.current){const scrollTop=scrollRef.current.scrollTop;const componentHeight=scrollRef.current.clientHeight;const newIndex=scrollTop/componentHeight;setActiveIndex(newIndex);// 스크롤 위치 업데이트\nsetScrollPosition(scrollTop);}};const calculateOpacity=index=>{if(scrollRef.current){const componentHeight=scrollRef.current.clientHeight;const distanceToComponent=Math.abs(scrollPosition-index*componentHeight);const maxDistance=componentHeight*0.4;// Calculate opacity based on the distance to the component\nconst opacity=1-Math.min(distanceToComponent/maxDistance,1);return opacity;}// Default opacity if scrollRef.current is undefined\nreturn 1;};const scrollToComponent=index=>{if(scrollRef.current){const componentHeight=scrollRef.current.clientHeight;scrollRef.current.scrollTo({top:index*componentHeight,behavior:\"smooth\"});}};const updateSlideState=index=>{scrollToComponent(index);};const moveToTop=()=>{if(scrollRef.current){scrollRef.current.scrollTo({top:0,behavior:\"smooth\"});}};return/*#__PURE__*/_jsxs(\"div\",{ref:scrollRef,onScroll:handleScroll,style:{height:\"100vh\",overflowY:\"scroll\",scrollBehavior:\"smooth\"},children:[/*#__PURE__*/_jsx(Header,{orientation:'vertical',length:components.length,clickHandler:updateSlideState}),scrollPosition!==0&&/*#__PURE__*/_jsx(Motion,{scrollPosition:scrollPosition,scrollHeight:(_scrollRef$current=scrollRef.current)===null||_scrollRef$current===void 0?void 0:_scrollRef$current.scrollHeight,clientHeight:(_scrollRef$current2=scrollRef.current)===null||_scrollRef$current2===void 0?void 0:_scrollRef$current2.clientHeight}),components.map((component,index)=>/*#__PURE__*/_jsx(\"div\",{style:{height:\"100vh\",opacity:calculateOpacity(index),transition:\"opacity 0.2s ease-in-out\"},children:/*#__PURE__*/React.cloneElement(component,{isActive:index===activeIndex,scrollPosition,activeIndex})},index)),/*#__PURE__*/_jsx(\"style\",{children:\"\\n                        @keyframes bounce {\\n                            0%, 20%, 50%, 80%, 100% {\\n                                transform: translateY(0);\\n                            }\\n                            50% {\\n                                transform: translateY(10px);\\n                            }\\n                            100% {\\n                                transform: translateY(0px);\\n                            }\\n                        }\\n                    \"}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",bottom:\"20px\",right:\"20px\",cursor:\"pointer\",zIndex:1000,color:\"#FFF\",animation:\"bounce 2s infinite\"},onClick:moveToTop,children:/*#__PURE__*/_jsx(ArrowCircleUpIcon,{sx:{fontSize:30}})})]});};export default Scroll;","map":{"version":3,"names":["React","useState","useRef","Header","Motion","ArrowCircleUpIcon","jsx","_jsx","jsxs","_jsxs","Scroll","_ref","_scrollRef$current","_scrollRef$current2","components","activeIndex","setActiveIndex","scrollPosition","setScrollPosition","scrollRef","handleScroll","current","scrollTop","componentHeight","clientHeight","newIndex","calculateOpacity","index","distanceToComponent","Math","abs","maxDistance","opacity","min","scrollToComponent","scrollTo","top","behavior","updateSlideState","moveToTop","ref","onScroll","style","height","overflowY","scrollBehavior","children","orientation","length","clickHandler","scrollHeight","map","component","transition","cloneElement","isActive","position","bottom","right","cursor","zIndex","color","animation","onClick","sx","fontSize"],"sources":["/Users/heewonkim/Desktop/Portfolio/my-portfolio/src/components/Wrapper/Scroll.jsx"],"sourcesContent":["// Scroll.jsx\n/*\nSPDX-FileCopyrightText: © 2024 Heewon Kim <khw0285@gmail.com>\nSPDX-License-Identifier: MIT\n*/\n\nimport React, { useState, useRef } from \"react\";\n\nimport Header from \"../Header/Header\";\nimport Motion from \"./Motion\";\nimport ArrowCircleUpIcon from '@mui/icons-material/ArrowCircleUp';\n\n/**\n * Scroll component handling vertical scrolling and displaying a Header.\n * @param {Object} props - Props for the Scroll component.\n * @param {React.Component[]} props.components - Array of React components to be displayed.\n */\nconst Scroll = ({ components }) => {\n    const [activeIndex, setActiveIndex] = useState(0);\n    const [scrollPosition, setScrollPosition] = useState(0);\n\n    const scrollRef = useRef();\n\n    // useEffect(() => {\n    //     const handleResize = () => {\n    //         if (scrollRef.current) {\n    //             const componentHeight = scrollRef.current.clientHeight;\n    //             const newIndex = Math.floor(scrollRef.current.scrollTop / componentHeight);\n    //             setActiveIndex(newIndex);\n    //         }\n    //     };\n\n    //     if (scrollRef.current) {\n    //         window.addEventListener(\"resize\", handleResize);\n\n    //         return () => {\n    //             window.removeEventListener(\"resize\", handleResize);\n    //         };\n    //     }\n    // }, []);\n\n    const handleScroll = () => {\n        if (scrollRef.current) {\n            const scrollTop = scrollRef.current.scrollTop;\n            const componentHeight = scrollRef.current.clientHeight;\n\n            const newIndex = scrollTop / componentHeight;\n            setActiveIndex(newIndex);\n\n            // 스크롤 위치 업데이트\n            setScrollPosition(scrollTop);\n        }\n    };\n\n    const calculateOpacity = (index) => {\n        if (scrollRef.current) {\n            const componentHeight = scrollRef.current.clientHeight;\n            const distanceToComponent = Math.abs(scrollPosition - index * componentHeight);\n            const maxDistance = componentHeight * 0.4;\n\n            // Calculate opacity based on the distance to the component\n            const opacity = 1 - Math.min(distanceToComponent / maxDistance, 1);\n\n            return opacity;\n        }\n\n        // Default opacity if scrollRef.current is undefined\n        return 1;\n    };\n\n    const scrollToComponent = (index) => {\n        if (scrollRef.current) {\n            const componentHeight = scrollRef.current.clientHeight;\n            scrollRef.current.scrollTo({\n                top: index * componentHeight,\n                behavior: \"smooth\",\n            });\n        }\n    };\n\n    const updateSlideState = (index) => {\n        scrollToComponent(index);\n    };\n\n    const moveToTop = () => {\n        if (scrollRef.current) {\n            scrollRef.current.scrollTo({\n                top: 0,\n                behavior: \"smooth\",\n            });\n        }\n    };\n\n    return (\n        <div\n            ref={scrollRef}\n            onScroll={handleScroll}\n            style={{\n                height: \"100vh\",\n                overflowY: \"scroll\",\n                scrollBehavior: \"smooth\",\n            }}\n        >\n            <Header\n                orientation={'vertical'}\n                length={components.length}\n                clickHandler={updateSlideState}\n            />\n            {scrollPosition !== 0 && (\n                <Motion\n                    scrollPosition={scrollPosition}\n                    scrollHeight={scrollRef.current?.scrollHeight}\n                    clientHeight={scrollRef.current?.clientHeight}\n                />\n            )}\n\n            {components.map((component, index) => (\n                <div\n                    key={index}\n                    style={{\n                        height: \"100vh\",\n                        opacity: calculateOpacity(index),\n                        transition: \"opacity 0.2s ease-in-out\",\n                    }}\n                >\n                    {React.cloneElement(component, { isActive: index === activeIndex, scrollPosition, activeIndex })}\n                </div>\n            ))}\n            <style>\n                {`\n                        @keyframes bounce {\n                            0%, 20%, 50%, 80%, 100% {\n                                transform: translateY(0);\n                            }\n                            50% {\n                                transform: translateY(10px);\n                            }\n                            100% {\n                                transform: translateY(0px);\n                            }\n                        }\n                    `}\n            </style>\n            <div\n                style={{\n                    position: \"fixed\",\n                    bottom: \"20px\",\n                    right: \"20px\",\n                    cursor: \"pointer\",\n                    zIndex: 1000,\n                    color: \"#FFF\",\n                    animation: \"bounce 2s infinite\",\n                }}\n                onClick={moveToTop}\n            >\n                <ArrowCircleUpIcon sx={{ fontSize: 30 }}/>\n            </div>\n        </div>\n    );\n};\n\nexport default Scroll;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}